# Phase 4B: 테스트 체크리스트

## 개요
Phase 1-3A + 4A 완료 후 로컬 환경에서 전체 통합 테스트를 수행하기 위한 체크리스트입니다.

---

## 📋 사전 준비

### 1. 환경 설정
- [ ] 로컬 D1 데이터베이스 마이그레이션 적용 확인
  ```bash
  wrangler d1 execute wow-campus-db --local --file=./migrations/0020_add_job_posting_details.sql
  ```
- [ ] 로컬 개발 서버 실행
  ```bash
  npm run dev
  ```
- [ ] 브라우저에서 `http://localhost:5173` 접속 확인

### 2. 테스트 계정 준비
- [ ] 기업 계정으로 로그인
- [ ] 기업 프로필 페이지 접근: `/profile/company`

---

## 🧪 프론트엔드 UI 테스트

### Section 2: 구인 공고 상세 정보

#### T1: E-7 비자 직종 코드 드롭다운
- [ ] **드롭다운 로드 확인**
  - E-7 코드 선택 필드가 정상적으로 표시되는가?
  - `public/data/e7-visa-codes.json` 파일이 로드되는가? (Network 탭 확인)
  - 87개 직종이 4개 카테고리로 그룹화되어 표시되는가?
  
- [ ] **옵션 그룹 표시 확인**
  - E-7-1: 전문인력 (최소 4,405만원) - 67개 직종
  - E-7-2: 준전문인력 (최소 2,515만원) - 9개 직종
  - E-7-3: 일반기능인력 (최소 2,515만원) - 8개 직종
  - E-7-4: 숙련기능점수제 (최소 2,600만원) - 3개 직종
  
- [ ] **직종 선택 시 동작**
  - E-7 코드 선택 시 아래에 최소 연봉 요건 표시되는가?
  - 예: "이 직종의 E-7 비자 최소 연봉 요건: 4,405만원 이상"
  - 배경색이 노란색(yellow-50)인가?

#### T2: 최소 연봉 자동 설정
- [ ] **E-7-1 직종 선택 시**
  - 최소 연봉 필드에 자동으로 4,405 입력되는가?
  - 최소 연봉 필드의 `min` 속성이 4405로 설정되는가?
  
- [ ] **E-7-2/3 직종 선택 시**
  - 최소 연봉 필드에 자동으로 2,515 입력되는가?
  - 최소 연봉 필드의 `min` 속성이 2515로 설정되는가?
  
- [ ] **E-7-4 직종 선택 시**
  - 최소 연봉 필드에 자동으로 2,600 입력되는가?
  - 최소 연봉 필드의 `min` 속성이 2600으로 설정되는가?

#### T3: 직무명 (한글/영문)
- [ ] 한글 직무명 입력 필드 동작 확인
- [ ] 영문 직무명 입력 필드 동작 확인
- [ ] placeholder 텍스트 표시 확인
  - 한글: "예: 3D 설계 엔지니어"
  - 영문: "예: 3D Design Engineer"

#### T4: 직무 내용 (textarea)
- [ ] **글자수 카운터 동작**
  - 텍스트 입력 시 실시간으로 글자수가 표시되는가?
  - 100자 미만 시 빨간색으로 표시되는가?
  - 100자 이상 시 초록색으로 표시되는가?
  
- [ ] **최소 글자수 권장**
  - "최소 100자 이상 권장" 문구가 표시되는가?
  - 현재 글자수가 동적으로 업데이트되는가?

#### T5: 모집 인원
- [ ] 숫자만 입력 가능한가?
- [ ] 기본값이 1인가?
- [ ] 최소값이 1로 제한되는가?

#### T6: 연봉 범위
- [ ] **최소 연봉 (salary_min)**
  - E-7 코드 선택 시 자동 설정되는가?
  - 수동으로 변경 가능한가?
  - E-7 최소 요건보다 낮게 설정하면 경고가 표시되는가?
  
- [ ] **최대 연봉 (salary_max)**
  - 선택 사항으로 비워둘 수 있는가?
  - 최소 연봉보다 낮게 설정할 수 있는가? (검증 필요)

#### T7: 계약 형태
- [ ] 3개 라디오 버튼이 표시되는가?
  - 정규직 (fulltime)
  - 계약직 (contract)
  - 인턴십 (intern)
- [ ] 하나만 선택 가능한가?
- [ ] required 속성이 적용되는가?

### Section 3: 외국인 지원 사항

#### T8: 비자 지원 수준
- [ ] **4단계 라디오 버튼**
  - 전면 지원 (full)
  - 부분 지원 (partial)
  - 협조만 제공 (assistance)
  - 지원 없음 (none)
  
- [ ] **상세 내용 입력**
  - 비자 지원 상세 입력 textarea가 표시되는가?
  - 선택 사항으로 비워둘 수 있는가?

#### T9: 주거 지원
- [ ] **4가지 옵션 라디오 버튼**
  - 무료 기숙사 제공 (dorm_free)
  - 유료 기숙사 제공 (dorm_paid)
  - 주거비 지원 (allowance)
  - 지원 없음 (none)
  
- [ ] **조건부 금액 입력 필드**
  - "무료 기숙사" 선택 시: 금액 필드 숨김
  - "유료 기숙사" 선택 시: 금액 필드 표시, label "월 기숙사 비용"
  - "주거비 지원" 선택 시: 금액 필드 표시, label "월 지원 금액"
  - "지원 없음" 선택 시: 금액 필드 숨김
  
- [ ] **금액 필드 동작**
  - 숫자만 입력 가능한가?
  - placeholder "예: 50만원"이 표시되는가?

#### T10: 정착 지원
- [ ] **다중 선택 체크박스**
  - 한국어 교육 지원 (korean)
  - 담당자 멘토링 (mentoring)
  - 문화 적응 프로그램 (culture)
  - 공항 픽업 서비스 (pickup)
  
- [ ] **다중 선택 동작**
  - 여러 개 동시 선택 가능한가?
  - 하나도 선택하지 않을 수 있는가?
  - 모두 선택 가능한가?

---

## 🔧 백엔드 API 테스트

### API T1: GET /api/profile/company
- [ ] **새 필드 반환 확인**
  - 14개 Phase 3A 필드가 응답에 포함되는가?
  ```json
  {
    "e7_visa_code": "E-7-1-01-001",
    "e7_visa_job_name": "소프트웨어 개발자",
    "job_title_ko": "백엔드 개발자",
    "job_title_en": "Backend Developer",
    "job_responsibilities": "...",
    "salary_min": 4405,
    "salary_max": 6000,
    "contract_type": "정규직",
    "visa_support_level": "full",
    "visa_support_details": "...",
    "housing_support_type": "dorm_free",
    "housing_support_amount": 0,
    "settlement_support": "[\"korean\",\"mentoring\"]"
  }
  ```

### API T2: PUT /api/profile/company - 정상 케이스
- [ ] **14개 필드 저장 확인**
  - 모든 Phase 3A 필드가 정상적으로 저장되는가?
  - DB에서 데이터 조회 시 올바른 값이 저장되었는가?
  ```bash
  wrangler d1 execute wow-campus-db --local --command="SELECT e7_visa_code, job_title_ko, salary_min FROM companies WHERE id = 1"
  ```

### API T3: PUT /api/profile/company - E-7 코드 검증
- [ ] **유효한 E-7 코드 형식**
  - `E-7-1-01-001` 형식 허용되는가?
  - `E-7-2-05-003` 형식 허용되는가?
  - `E-7-4` 형식 허용되는가?

- [ ] **잘못된 E-7 코드 형식**
  - `E-8-1-01-001` 입력 시 400 에러 반환되는가?
  - `E-7-5-01-001` 입력 시 400 에러 반환되는가?
  - `INVALID` 입력 시 400 에러 반환되는가?
  - 에러 메시지: "E-7 비자 직종 코드 형식이 올바르지 않습니다."

### API T4: PUT /api/profile/company - 최소 연봉 검증
- [ ] **E-7-1 최소 연봉 검증**
  - `e7_visa_code: "E-7-1-01-001", salary_min: 4405` → 성공
  - `e7_visa_code: "E-7-1-01-001", salary_min: 5000` → 성공
  - `e7_visa_code: "E-7-1-01-001", salary_min: 4000` → 400 에러
  - 에러 메시지: "E-7 비자 E-7-1-01-001 직종은 최소 연봉 4405만원 이상이어야 합니다."

- [ ] **E-7-2/3 최소 연봉 검증**
  - `e7_visa_code: "E-7-2-01-001", salary_min: 2515` → 성공
  - `e7_visa_code: "E-7-2-01-001", salary_min: 2000` → 400 에러
  - 에러 메시지: "E-7 비자 E-7-2-01-001 직종은 최소 연봉 2515만원 이상이어야 합니다."

- [ ] **E-7-4 최소 연봉 검증**
  - `e7_visa_code: "E-7-4", salary_min: 2600` → 성공
  - `e7_visa_code: "E-7-4", salary_min: 2500` → 400 에러
  - 에러 메시지: "E-7 비자 E-7-4 직종은 최소 연봉 2600만원 이상이어야 합니다."

### API T5: PUT /api/profile/company - JSON 필드 저장
- [ ] **settlement_support 배열 저장**
  - 빈 배열 `[]` 저장되는가?
  - 단일 항목 `["korean"]` 저장되는가?
  - 여러 항목 `["korean", "mentoring", "culture", "pickup"]` 저장되는가?
  - DB에서 조회 시 JSON 문자열로 저장되었는가?

---

## 🔄 전체 플로우 통합 테스트

### Flow T1: 새 기업 프로필 생성
1. [ ] 기업 계정으로 로그인
2. [ ] 프로필 페이지 접근
3. [ ] Section 1 (기본 정보) 입력
4. [ ] Section 2 (구인 공고 상세) 입력
   - E-7 코드 선택: `E-7-1-01-001 (소프트웨어 개발자)`
   - 직무명: "백엔드 개발자" / "Backend Developer"
   - 직무 내용: 100자 이상 입력
   - 모집 인원: 2명
   - 연봉: 4,405만원 ~ 6,000만원
   - 계약: 정규직
5. [ ] Section 3 (외국인 지원) 입력
   - 비자 지원: 전면 지원
   - 주거 지원: 무료 기숙사
   - 정착 지원: 한국어 교육, 멘토링 선택
6. [ ] "저장" 버튼 클릭
7. [ ] 성공 메시지 표시 확인
8. [ ] 페이지 새로고침 후 입력한 데이터 유지 확인

### Flow T2: 기존 프로필 수정
1. [ ] 기존 데이터가 있는 기업 계정 로그인
2. [ ] 프로필 페이지 접근
3. [ ] 기존 데이터가 폼에 올바르게 로드되는가?
4. [ ] E-7 코드 변경 (예: E-7-1 → E-7-2)
5. [ ] 최소 연봉이 자동으로 업데이트되는가?
6. [ ] 저장 후 변경 사항 반영 확인

### Flow T3: 유효성 검증 시나리오
1. [ ] **필수 필드 누락**
   - E-7 코드 미선택 시 저장 방지
   - 직무명 미입력 시 저장 방지
   - 계약 형태 미선택 시 저장 방지
   
2. [ ] **E-7 최소 연봉 미달**
   - E-7-1 선택 후 최소 연봉을 4,000으로 입력
   - 저장 시 400 에러 및 에러 메시지 표시
   - "E-7 비자 ... 직종은 최소 연봉 4405만원 이상이어야 합니다."

3. [ ] **주거 지원 금액 입력**
   - "유료 기숙사" 선택 시 금액 필드 필수인가?
   - "주거비 지원" 선택 시 금액 필드 필수인가?
   - 0원 입력 가능한가?

---

## 🐛 에러 처리 테스트

### Error T1: 네트워크 오류
- [ ] E-7 코드 JSON 로드 실패 시 적절한 에러 메시지 표시
- [ ] API 호출 실패 시 사용자에게 에러 피드백

### Error T2: 잘못된 데이터 타입
- [ ] 연봉 필드에 문자 입력 시 처리
- [ ] 모집 인원에 음수 입력 시 처리

### Error T3: 브라우저 호환성
- [ ] Chrome에서 정상 동작
- [ ] Firefox에서 정상 동작
- [ ] Safari에서 정상 동작 (모바일 포함)

---

## 📱 반응형 디자인 테스트

### Responsive T1: 모바일 (375px)
- [ ] Section 2/3 레이아웃이 1열로 표시되는가?
- [ ] E-7 드롭다운이 화면에 맞게 표시되는가?
- [ ] 버튼들이 터치하기 쉬운 크기인가?

### Responsive T2: 태블릿 (768px)
- [ ] 일부 필드가 2열 그리드로 표시되는가?
- [ ] 주거 지원 라디오 버튼이 적절히 배치되는가?

### Responsive T3: 데스크톱 (1024px+)
- [ ] 전체 레이아웃이 최적화되어 표시되는가?
- [ ] 긴 텍스트가 적절히 줄바꿈되는가?

---

## 🎨 UI/UX 검증

### UX T1: 색상 및 스타일
- [ ] E-7 코드 섹션: 노란색 배경 (yellow-50)
- [ ] 급여 섹션: 초록색 배경 (green-50)
- [ ] 비자 지원 섹션: 보라색 배경 (purple-50)
- [ ] 주거 지원 섹션: 파란색 배경 (blue-50)

### UX T2: 레이블 및 안내 문구
- [ ] 모든 필드에 명확한 레이블이 있는가?
- [ ] 필수 필드에 빨간색 별표(*)가 표시되는가?
- [ ] placeholder 텍스트가 적절한가?

### UX T3: 사용자 피드백
- [ ] 저장 성공 시 명확한 성공 메시지
- [ ] 저장 실패 시 구체적인 에러 메시지
- [ ] 로딩 중 인디케이터 표시 (해당되는 경우)

---

## 📊 성능 테스트

### Perf T1: 초기 로드 시간
- [ ] 페이지 로드 시간 3초 이내
- [ ] E-7 코드 JSON 로드 시간 1초 이내

### Perf T2: 상호작용 응답성
- [ ] E-7 코드 선택 시 즉각 반응 (100ms 이내)
- [ ] 글자수 카운터 업데이트 즉각 반응
- [ ] 주거 지원 필드 표시/숨김 즉각 반응

### Perf T3: API 응답 시간
- [ ] GET /api/profile/company 응답 1초 이내
- [ ] PUT /api/profile/company 응답 2초 이내

---

## 📝 문서화 확인

### Doc T1: 코드 주석
- [ ] 복잡한 로직에 주석이 있는가?
- [ ] 함수에 JSDoc 주석이 있는가?

### Doc T2: 가이드 문서
- [ ] `docs/E7_VISA_JOB_CODES.md` 문서가 완전한가?
- [ ] `docs/UI_REDESIGN_PLAN.md` 문서가 최신인가?
- [ ] 이 테스트 체크리스트가 포괄적인가?

---

## ✅ 최종 검증

### Final T1: 데이터 무결성
- [ ] DB에 저장된 데이터가 폼 입력과 일치하는가?
- [ ] JSON 필드가 올바르게 파싱/저장되는가?
- [ ] 기존 데이터가 손실되지 않았는가?

### Final T2: 보안
- [ ] SQL 인젝션 방지되는가?
- [ ] XSS 공격 방지되는가?
- [ ] 인증되지 않은 접근 차단되는가?

### Final T3: 배포 준비
- [ ] 로컬 환경에서 모든 테스트 통과
- [ ] TypeScript 타입 체크 통과
- [ ] 프로덕션 빌드 성공
- [ ] 프로덕션 마이그레이션 준비 완료

---

## 🚀 테스트 결과 요약

### 통과한 테스트
- [ ] 프론트엔드 UI 테스트: ___/10
- [ ] 백엔드 API 테스트: ___/5
- [ ] 전체 플로우 테스트: ___/3
- [ ] 에러 처리 테스트: ___/3
- [ ] 반응형 디자인 테스트: ___/3
- [ ] UI/UX 검증: ___/3
- [ ] 성능 테스트: ___/3
- [ ] 문서화 확인: ___/2
- [ ] 최종 검증: ___/3

### 총 통과율: ___/35 (___%)

---

## 📌 다음 단계

테스트 완료 후:
1. ✅ 모든 테스트 통과 확인
2. 🔄 Phase 4C: 프로덕션 배포 준비
   - 프로덕션 데이터베이스 백업
   - 프로덕션 마이그레이션 실행
   - Cloudflare Workers 배포
   - 프로덕션 환경 검증
